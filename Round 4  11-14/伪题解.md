## Round 4

出题人：吕紫剑、朱子健、马耀华

#### 小Z的礼物

显然可以枚举一下有哪些网友还没被填上进行容斥。随便dp一下容斥系数就好了。

#### 万圣节的积木

充要条件即每个切线 $i-1,i$ 满足对于每个 $j \geq i$，$[i,j]$ 能放在 $j+1$ 上。

写出来式子是个凸包状物，只要想办法维护出每个后缀的凸包并在凸包上二分即可。可以选择动态凸包，也可以直接分治。

#### 青春猪头少年不会梦到兔女郎学姐

首先设 $f(i,j)$ 表示把 $i$ 个东西分成 $j$ 段长度乘积之和，容易发现 $f(i,j)=C(i+j-1,2j-1)$（考虑乘的组合意义）。

然后为了让这 $j$ 段分离开，安排一个容斥，设 $g(i,j)=\sum_{t \geq j} f(i,t) C_{t-1}^{j-1} (-1)^{t-j}$，我们就可以不用管分离了。

接下来把这些段安排到环上。为了让每个方案被正确计数，我们让头为1，尾不为1，这样一个循环同构的方案会被算1的段数次。头为1的方案只要把1的球数-1即可。头为1尾为1只要把1的求出-2即可。